/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  containsBytes,
  fixEncoderSize,
  getBytesEncoder,
  type Address,
  type ReadonlyUint8Array,
} from 'gill';
import {
  type ParsedExpireEscrowInstruction,
  type ParsedFundEscrowInstruction,
  type ParsedInitializeConfigInstruction,
  type ParsedInitializeEscrowInstruction,
  type ParsedRefundEscrowInstruction,
  type ParsedReleaseEscrowInstruction,
} from '../instructions';

export const ESCROW_PROGRAM_ADDRESS =
  '8jR5GeNzeweq35Uo84kGP3v1NcBaZWH5u62k7PxN4T2y' as Address<'8jR5GeNzeweq35Uo84kGP3v1NcBaZWH5u62k7PxN4T2y'>;

export enum EscrowAccount {
  Config,
  SolEscrow,
}

export function identifyEscrowAccount(
  account: { data: ReadonlyUint8Array } | ReadonlyUint8Array
): EscrowAccount {
  const data = 'data' in account ? account.data : account;
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([155, 12, 170, 224, 30, 250, 204, 130])
      ),
      0
    )
  ) {
    return EscrowAccount.Config;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([75, 199, 250, 63, 244, 209, 235, 120])
      ),
      0
    )
  ) {
    return EscrowAccount.SolEscrow;
  }
  throw new Error(
    'The provided account could not be identified as a escrow account.'
  );
}

export enum EscrowInstruction {
  ExpireEscrow,
  FundEscrow,
  InitializeConfig,
  InitializeEscrow,
  RefundEscrow,
  ReleaseEscrow,
}

export function identifyEscrowInstruction(
  instruction: { data: ReadonlyUint8Array } | ReadonlyUint8Array
): EscrowInstruction {
  const data = 'data' in instruction ? instruction.data : instruction;
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([49, 150, 54, 201, 45, 106, 39, 175])
      ),
      0
    )
  ) {
    return EscrowInstruction.ExpireEscrow;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([155, 18, 218, 141, 182, 213, 69, 201])
      ),
      0
    )
  ) {
    return EscrowInstruction.FundEscrow;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([208, 127, 21, 1, 194, 190, 196, 70])
      ),
      0
    )
  ) {
    return EscrowInstruction.InitializeConfig;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([243, 160, 77, 153, 11, 92, 48, 209])
      ),
      0
    )
  ) {
    return EscrowInstruction.InitializeEscrow;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([107, 186, 89, 99, 26, 194, 23, 204])
      ),
      0
    )
  ) {
    return EscrowInstruction.RefundEscrow;
  }
  if (
    containsBytes(
      data,
      fixEncoderSize(getBytesEncoder(), 8).encode(
        new Uint8Array([146, 253, 129, 233, 20, 145, 181, 206])
      ),
      0
    )
  ) {
    return EscrowInstruction.ReleaseEscrow;
  }
  throw new Error(
    'The provided instruction could not be identified as a escrow instruction.'
  );
}

export type ParsedEscrowInstruction<
  TProgram extends string = '8jR5GeNzeweq35Uo84kGP3v1NcBaZWH5u62k7PxN4T2y',
> =
  | ({
      instructionType: EscrowInstruction.ExpireEscrow;
    } & ParsedExpireEscrowInstruction<TProgram>)
  | ({
      instructionType: EscrowInstruction.FundEscrow;
    } & ParsedFundEscrowInstruction<TProgram>)
  | ({
      instructionType: EscrowInstruction.InitializeConfig;
    } & ParsedInitializeConfigInstruction<TProgram>)
  | ({
      instructionType: EscrowInstruction.InitializeEscrow;
    } & ParsedInitializeEscrowInstruction<TProgram>)
  | ({
      instructionType: EscrowInstruction.RefundEscrow;
    } & ParsedRefundEscrowInstruction<TProgram>)
  | ({
      instructionType: EscrowInstruction.ReleaseEscrow;
    } & ParsedReleaseEscrowInstruction<TProgram>);
